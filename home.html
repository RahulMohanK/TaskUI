<!Doctype html>
<html>

<head>

    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <link rel="stylesheet" href="Stylesheets/Sidebar.css" type="text/css" />
    <link rel="stylesheet" href="Stylesheets/Table.css" type="text/css" />



</head>

<body>
    <script>0</script>
    <div class="sidenav">
        <a href="file:///C:/Users/Workstation/Desktop/StaffUI/home.html">Home</a>
        <a href="file:///C:/Users/Workstation/Desktop/StaffUI/register.html">Register</a>
    </div>
    <div class="main">
        <p id="para"></p>
        <div>
            <form>
                <label for="Staff">Choose a Staff:</label>

                <select id="Staff">
                    <option value="admin">Administrative Staff</option>
                    <option value="teaching">Teaching Staff</option>
                    <option value="support">Supporting Staff</option>
                </select>
                <button type="button" onclick="getHeading()">Submit</button>
            </form>
        </div>

        <br><br>

        <div id="tableDiv">
            <table id="staffTable">
            </table>
        </div>


    </div>


    <script>
        let dummy = [
            {
                "id": 1127,
                "empId": "suppo45",
                "name": "rahul",
                "phone": "+91-78945612",
                "email": "rahul@asd.com",
                "dob": "1999-02-22T00:00:00",
                "staffType": 2,
                "createdDate": "2020-09-02T16:46:52.607",
                "updatedDate": "2020-09-02T16:46:52.607",
                "administrativeStaff": [],
                "supportingStaff": [
                    {
                        "id": 36,
                        "staffId": 1127,
                        "department": "EEE"
                    }
                ],
                "teachingStaff": []
            },
            {
                "id": 1136,
                "empId": "suppo558",
                "name": "rahul",
                "phone": "+91-78945612",
                "email": "rahul@asd.com",
                "dob": "1999-02-22T00:00:00",
                "staffType": 2,
                "createdDate": "2020-09-03T12:35:16.83",
                "updatedDate": "2020-09-03T12:35:16.83",
                "administrativeStaff": [],
                "supportingStaff": [
                    {
                        "id": 40,
                        "staffId": 1136,
                        "department": "EEE"
                    }
                ],
                "teachingStaff": []
            },
            {
                "id": 1139,
                "empId": "suppo568",
                "name": "rahul",
                "phone": "+91-78945612",
                "email": "rahul@asd.com",
                "dob": null,
                "staffType": 2,
                "createdDate": "2020-09-03T14:22:09.69",
                "updatedDate": "2020-09-03T14:22:09.69",
                "administrativeStaff": [],
                "supportingStaff": [
                    {
                        "id": 41,
                        "staffId": 1139,
                        "department": "EEE"
                    }
                ],
                "teachingStaff": []
            },
            {
                "id": 1141,
                "empId": "suppo578",
                "name": "rahul",
                "phone": null,
                "email": "rahul@asd.com",
                "dob": null,
                "staffType": 2,
                "createdDate": "2020-09-03T14:22:30.827",
                "updatedDate": "2020-09-03T14:22:30.827",
                "administrativeStaff": [],
                "supportingStaff": [
                    {
                        "id": 42,
                        "staffId": 1141,
                        "department": "EEE"
                    }
                ],
                "teachingStaff": []
            },
            {
                "id": 1144,
                "empId": "suppo451",
                "name": "rahul",
                "phone": null,
                "email": null,
                "dob": null,
                "staffType": 2,
                "createdDate": "2020-09-03T14:26:25.357",
                "updatedDate": "2020-09-03T14:26:25.357",
                "administrativeStaff": [],
                "supportingStaff": [
                    {
                        "id": 43,
                        "staffId": 1144,
                        "department": "EEE"
                    }
                ],
                "teachingStaff": []
            },
            {
                "id": 1145,
                "empId": "suppo4558",
                "name": "rahul",
                "phone": "+91-78945612",
                "email": "rahul@asd.com",
                "dob": "1999-02-22T00:00:00",
                "staffType": 2,
                "createdDate": "2020-09-03T16:17:30.01",
                "updatedDate": "2020-09-03T16:17:30.01",
                "administrativeStaff": [],
                "supportingStaff": [
                    {
                        "id": 44,
                        "staffId": 1145,
                        "department": "CSE"
                    }
                ],
                "teachingStaff": []
            },
            {
                "id": 1148,
                "empId": "suppo45158",
                "name": "rahul",
                "phone": "+91-78945612",
                "email": "rahul@asd.com",
                "dob": "1999-02-22T00:00:00",
                "staffType": 2,
                "createdDate": "2020-09-03T17:02:14.193",
                "updatedDate": "2020-09-03T17:07:34.28",
                "administrativeStaff": [],
                "supportingStaff": [
                    {
                        "id": 46,
                        "staffId": 1148,
                        "department": "CSE"
                    }
                ],
                "teachingStaff": []
            },
            {
                "id": 1149,
                "empId": "teach01",
                "name": "rahul",
                "phone": "+91-78945612",
                "email": "rahul@asd.com",
                "dob": "1999-02-22T00:00:00",
                "staffType": 2,
                "createdDate": "2020-09-03T17:38:55.86",
                "updatedDate": "2020-09-03T17:38:55.86",
                "administrativeStaff": [],
                "supportingStaff": [
                    {
                        "id": 47,
                        "staffId": 1149,
                        "department": "CSE"
                    }
                ],
                "teachingStaff": []
            }
        ]
        var url = 'https://localhost:8001/Staff/suppo45'

        getHeading();
        async function getData(url) {
            let response = await fetch(url, {
                method: 'GET',
                headers: {
                    'Access-Control-Allow-Origin': '*'

                },
                cors: 'no-cors'





            });

            return response.json();
        }

        function showData(result) {
            let counter = 0;
            for (let i = 0; i < result.length; i++) {

                var table = document.getElementById("staffTable");
                var row = table.insertRow(-1);

                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);
                var cell5 = row.insertCell(4);
                var cell6 = row.insertCell(5);
                var cell7 = row.insertCell(6);

                cell1.innerHTML = ++counter;
                cell2.innerHTML = result[i].empId;
                cell3.innerHTML = result[i].name;
                cell4.innerHTML = result[i].phone == null ? 'not provided' : result[i].phone;
                cell5.innerHTML = result[i].email == null ? 'not provided' : result[i].email;
                cell6.innerHTML = result[i].dob == null ? 'not provided' : result[i].dob;
                cell7.innerHTML = result[i].supportingStaff[0].department;

            }
        }

        function getHeading() {
            let heading;
            var x = document.getElementById("Staff").selectedIndex;
            var staffType = document.getElementsByTagName("option")[x].value
            console.log(staffType);
            if (staffType == "admin") {
                heading = `<tr>
                        <th>Sl.No</th>
                        <th>EmpId</th>
                        <th>Name</th>
                        <th>Phone</th>
                        <th>Email</th>                        
                        <th>Dob</th>
                        <th>Designation</th>
                    </tr>`;
            }
            else if (staffType == "teaching") {
                heading = `<tr>
                        <th>Sl.No</th>
                        <th>EmpId</th>
                        <th>Name</th>
                        <th>Phone</th>
                        <th>Email</th>
                        <th>Dob</th>
                        <th>Subject</th>
                    </tr>`;
            }
            else {
                heading = `<tr>
                        <th>Sl.No</th>
                        <th>EmpId</th>
                        <th>Name</th>
                        <th>Phone</th>
                        <th>Email</th>
                        
                        <th>Dob</th>
                        <th>Department</th>
                    </tr>`;
            }

            document.getElementById("staffTable").innerHTML = heading;
            // getData(url)
            //     .then(data => {
            //         console.log(data);
            //         showData(data);
            //     });
            showData(dummy);
            //  'https://jsonplaceholder.typicode.com/todos'
        }


    </script>
</body>


</html>